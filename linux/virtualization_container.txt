#######################Docker######################
# in docker cli / in the left for the host machine and for the right for the container
# but in the docker compose config file it get converted . in the left for the container and in the right for the host machine
docker ps
docker ps -a
docker run --name testPostgres -it --rm -e POSTGRES_PASSWORD=password -v ./test.docker:/wow.txt -p 5432:5400 postgres:latest bash
docker run --name my_postgres -e POSTGRES_USER=admin -e POSTGRES_PASSWORD=password -e POSTGRES_DB=mydatabase -p 5432:5432 -v ./myFile.sql:/myFile.sql --rm -it postgres bash
docker run --name test -d postgres
docker run --name my_postgres \
  -e POSTGRES_USER=admin \
  -e POSTGRES_PASSWORD=password \
  -e POSTGRES_DB=mydatabase \
  -p 5432:5432 \
  -v $(pwd)/myFile.sql:/docker-entrypoint-initdb.d/init.sql \
  -d postgres
docker exec -it my_postgres bash
docker exec -it my_postgres cat /file.txt
docker images
docker rmi image-name:tag
docker rm conatiner-name
docker volume ls
docker network ls
#####################docker Clean #########
docker image prune
docker volume prune
docker container prune
docker volume prune
docker network prune
docker system prune
docker system prune -a
docker system df -v
#######################docker file###############
VOLUME /etc/tinyproxy # make this location persistent it will stay the same after u restart a container
EXPOSE 8888  # just for info and told docker to open this port


#
# Dockerfile for tinyproxy
#

FROM alpine
MAINTAINER kev <noreply@easypi.pro>

RUN set -xe \
    && apk add --no-cache tinyproxy \
    && sed -i -e '/^Allow /s/^/#/' \
              -e '/^ConnectPort /s/^/#/' \
              -e '/^#DisableViaHeader /s/^#//' \
              /etc/tinyproxy/tinyproxy.conf

VOLUME /etc/tinyproxy
EXPOSE 8888

CMD ["tinyproxy", "-d"]
###### Clean system##########3
docker system prune
docker system prune -a
docker image prune
docker volume prune
docker network prune
docker container prune

docker rm -f $(docker ps -aq)      # Remove all containers
docker rmi -f $(docker images -q)  # Remove all images
docker volume rm $(docker volume ls -q)  # Remove all volumes
docker network rm $(docker network ls -q)  # Remove all networks

########################## Docker volume ################
docker cp containerName:/myFile.txt ./myFileOut.txt
##########################Docker Compose ################
docker compose up -d
docker compose up
docker compose down
docker compose ps
########################Minikube##########################
hostname
hostname -i
# minikube

minikube start --driver=kvm
minikube stop
minikube status
minikube ip
minikube profile list
minikube profile profilename # to set the default profile
minikube start --nodes 2 -p profilename # create new profile
minikube delete -p profilename
minikube ssh
minikube ssh -n node-name

# kubectl

kubectl cluster-info
kubectl get nodes
kubectl get namespaces

# pod
kubectl run podname --image=nginx
kubectl get pods
kubectl get pods -A
kubectl get pods -o wide
kubectl get pods --namespaces default
kuberctl describe pod podname
kubectl delete pod podname

# deployment
kubectl create deployment name-deployment --image=nginx
kubectl get deployments
kubectl get deployments -A
kubectl scale deployment name-deployment --replicas=5
kubectl scale deployment name-deployment --replicas=3
################################################################
####################################Vitrual Machine Manager (kvm)#######
pacman -S virt-manager
pacman -S qemu-base
systemctl start libvirtd
systemctl enable libvirtd
usermod -aG kvm,libvirt $USER # to creat virtual machin without root privelege
#################################################################
